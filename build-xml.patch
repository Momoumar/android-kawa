--- build.xml.orig	2010-10-11 15:48:59.092681778 -0700
+++ build.xml	2010-11-04 22:26:34.565673740 -0700
@@ -64,4 +64,27 @@
     -->
     <setup />
 
+    <target name="-dex" depends="compile,scompile">
+      <dex-helper />
+    </target>
+
+    <!-- Compile this project's .scm files into .class files. -->
+    <target name="scompile" depends="-resource-src, -aidl">
+      <java failonerror="true" fork="true" classname="kawa.repl">
+	<classpath>
+	  <pathelement path="libs/kawa.jar"/>
+	  <pathelement path="${sdk.dir}/platforms/${target}/android.jar"/>
+          <pathelement path="${out.classes.absolute.dir}"/>
+	</classpath>
+       <arg value="-d"/> <arg path="${out.classes.absolute.dir}"/>
+       <arg line="-P kawa.android. --warn-undefined-variable --module-static-run --warn-invoke-unknown-method --warn-as-error"/>
+       <arg value="-C"/>
+       <arg file="src/kawa/android/hello.scm"/>
+<!--       <fileset dir=".">
+         <include name="**/*.scm"/>
+       </fileset>
+-->
+      </java>
+    </target>
+
 </project>
